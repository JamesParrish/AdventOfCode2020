using System;
using System.Collections.Generic;
using System.Linq;

namespace AdventOfCode.Days
{
    public class Day3 : IDay
    {
        private readonly IList<string> inputs = new List<string>() { "...............#...#..#...#....", "...#....##.....##...######..#..", "....#.....#.##..#...#..#.......", "...#..........#.#....#......#..", "....#.#...#.#.......#......##.#", "....#.#..........#.....#.##....", "##...#.#.##......#......#.#.#..", "#.#.#........#....#..#.#.......", "..#...##..#..#.......#....###..", ".#.#..........#...#........#..#", ".#..#......#....#.#...#...#.#.#", "..#.........#..##.....#.#.##.#.", ".#......#...#....#.....#......#", "........#..##..##.........#..#.", ".....#....###..#....##........#", ".###...#..##..#.##......##...##", ".#...#...#..#.#..#...##.....#..", ".......#....#....#.#...#.......", ".##.......#.##...#.#...#..#....", "#.#...#......#....#.......#....", "..###...............####...#.#.", ".##.#....#......#..#...#.#..#.#", ".............#.#.#......##.....", "#....#.#.#........#....##...#..", "...##....##...##..#...#........", "..##......#...#......#...###...", "...#...##......##.#.#..#.......", "#......#..#...#.#..#......#..##", ".#..#..#........##....##.......", ".#...........###.###.##...#....", "............#.#...........#.#..", "#...#........#...#...#..#.#.#.#", "...#.......#.#.#..#.#..........", "......#..#..#....##..##..##....", "........##...#......#..#.#.....", "..#.#.......#......#...........", "#.#.....#......##..........#.#.", "#.....###.#...#...#..#....#...#", ".##.#...#............##.....#..", "###....#.#.....#.......##......", "##.......##.....#..#...#..##.##", "....#.##............###...#..##", ".###..#...##.#..#..##..#.......", ".##.##..####.....#.........#...", "....####..#...#....#.#...#.....", "..##....#..#......#...........#", "..........#......#..##.......#.", ".................#.#.#........#", "#.......##.#...##.......##.##..", ".#................#.#.....##..#", "......#..#............##.#.....", "...##............#.....#.....#.", "##.###.#.......#....#.........#", "......#.....#.#.#.#......#.....", "......#.##......#......##......", "..#....#...#..#.....#..#....#.#", ".#.##.##.....#.......#.......#.", "...#..#.#......##....##..#.....", ".#.....#......##...#..#.#....#.", "..#......#....#..#..###.#.#....", ".....#........#.#...#..#.#.....", "....#.#.......#...##.....####..", "#..#..##...#...........#...#..#", ".#..#...#.....#.....#.#.....#.#", "..##..###.....#...#.#.#.......#", "#..##.##......###..#......###..", "#..#...#.......#....#.#...#.#.#", "...........###..#...#..##....#.", ".....#...........###.......#...", "##......#.......#......##.#..#.", "#.................#........#...", "#.#.............#......#...#..#", "......#.#....#....#....#....#.#", "..#...#....#..#....#....#..#...", "#....#......#..#...#..#....#.#.", "..#.....#..#...#...#.......#...", ".#........###..##.#..#.........", ".....##.#.....#..###..#........", "...#...#.###....######......#..", ".###.#..#.....#.....#..#...#...", "##..#.#......#.........#...#..#", "###...##..###.......#..##.#.#.#", ".#...................#..#...##.", ".#...#...###...#.......#......#", "....#.....##....#...##.#...#.##", "..#....#......#...#..###.......", ".........#..........##........#", "...#.........##..#....#..###...", "......#.##....#.#........#.#.##", "....#..#...#.............#....#", "#..#.....#.#.....#....#........", "....#..#...####.#.###..#.......", ".....#....#....#..#..#.#.....#.", "#..##....#.....#.#.............", ".##...#..#.......#...##.###....", "##......#...##....#......##....", "#......#.#......#.#..#......#..", ".#...#......#............###..#", ".#..#.#.....#.#.....#..#....#..", ".#............#...#..#..#...##.", "...#...#....#.#.#....#....#....", "........#......###.#....##.##.#", "......#.#..................##..", "..#..#........#..##..........##", ".#...#.#....#####.#.#..#.......", ".....#..#.#..#.....#.#........#", "#.#..#..#.#..........#..#..#...", ".##........#.#.......#........#", ".....#....#..##...#......##....", "....#.##.##...##.#.........#.#.", "...#...#..#.#.......#.......#..", ".................##..#.........", "..##.##....#...#.##.......#..#.", "....#...........#.....###....##", ".#..................#..........", "....#.##....#......##.#..#.##.#", "#......#..#.#....##...####...#.", "#.....#.#.##...........#.##...#", ".......#...##..#.........##....", ".#...#..........##......#..#.#.", "#...#.#......#.....#........#..", "........#.....#.......##......#", ".#..#...........#...#..#..#....", "......#.##......##.#......#..##", "......#....#..#................", "##.#.......#......#..#....##.##", "..#...###..#.......#...#.#....#", ".....#...#.........#.....#..#.#", "..#.....#.........#..#...#.#...", ".#.........##..#.#...#.....##..", "..........#.#.#...#....#....#..", "....#.###.#..#..#..#.#........#", "..#...##...##.#.#.....#.#..##..", ".#..#......#.####..#.......#..#", "##.......#.....#.#.#..#...##..#", ".##......##...##.........#..#..", "..#.##..#......#......#..#..#..", "..#..#.##..#........#....#.#...", "##.####...##.#..##.........#..#", ".#.......#.#..#.....#.##.......", "........#.........#...........#", "..#...#.####.....##.##.#....#.#", ".....#..##.#..###.##.#.#...#...", "#..##..##....#...#....#...#....", ".###.#....#..#.......#......###", ".#....##.....#.#........#...#.#", "#.#.#..#..#...#....#..#.....#..", "....##...#.##..#............#..", "##......###...#...#...#....#...", "#.#...#.#..#..##.##..##..#....#", ".#...#.#....#..##.#..##..#.....", ".............#..#..#.#.....#...", "#........#..........#....###...", "..#..#......#...#........#.....", ".#..#.............#.........#..", "#.....#....##..#..#.#.#..#.....", "...#......#.........#.#....##.#", "..#.......##....###..#.........", ".#.......#......#..............", ".#...##.....##...###.#....#.#..", "......#....#.........#.......#.", "##.......#..##....###.#.....##.", ".....#......####.....#......#..", "....#....#..###....#.....##...#", "...#...#.#........#.....#..#.##", "#..#....#.#...###...##.....##..", "#.....##...#.#............#....", "##....#.......#.#.#....#.#.###.", "#........#...#...####.#....#.#.", ".##.#......#........#..#.....#.", "...##.#.......#...#.#.##..#...#", "......#.........##..#....#.....", ".#......#...........#......#...", "......#.#.#.#..#.#....#....#..#", "##.................##...#.#....", "........#.........#..#..#...###", ".#........#........#....#..#...", "....###.##.##......#.#...#....#", "#......#.#..............#......", ".......#..#....#..##.........#.", "#............#....#............", "#...#.#.........##..###...##...", ".#....#.#.#.....#..#..##.......", ".............##.#.#.......#..#.", "#...#..##.#..###.....##..#.....", "...#.#.....#...#......##.#..#..", "#..........#.##.#...#...#.#...#", "...#.#...#.........#.#..#.#..#.", "#....#.................#.......", "..#..#.#.#..#.#..##...#.#......", "..#....#.#.#...#.....#...#.....", "#...#.###......#.......#..#..#.", "#.#.##.##..............#.#.#..#", "#..........#.#.........#.###...", "...........#.......#.#..#......", "....#.#..#....#....#....##.....", "#..#...##########.........#.#..", "..#.............##........#.#..", "#.#.##......#...#.#....##..##..", "..##..#.#.#....#......#.#..#.#.", ".#.#...#................#......", "#...#...#.....##.#...#.......#.", ".....##.......#...#......#.##..", "....#.##..........#.#.##....##.", "...........##........#.#.#.#...", "..#...........###.#....#..#....", "..#.#...#...#.#........#.....#.", ".##......##.....#........#.....", "....#.......#....#...#.##...#..", ".#.....##.....#...##...........", "#....#.##.##...#...###.#####...", "..#.#......#.#.......#....#..#.", "..........#...#...........#....", ".........#..#...#...#......#.##", ".#...#.#...#.###.##..#........#", "#....#.....#.......##....#.....", "#.....#..#.....#...##.......#..", "#.#.#.#.............#.....#...#", "...#.....#.....#...............", "..##.###.#.#........#.........#", "...##..#.##..#....#.#...#.#....", "...##...#...##.#.........#.#..#", ".###......#....#.........#.#...", "###.#.#...#.......#...#.....#.#", "...#.#.......#.....####........", "......#..#.....###.#....#..#...", "..####...#...#..#......#...#...", "#..............##....#......##.", "..##..###...##..#.#.........#..", "#..#.#...#.......#.........##..", "..##....#......#...#..##.......", "..#.#..#..###.....#.....#...###", ".#..#.##.....##.#.#.#........#.", "..#.#.........#................", "..#...........#.#...##.#...#..#", ".....#........#..#.....#....#..", "#.#....#...........##.....#..##", "##.......#.....#.....#.#......#", ".##............####.#........##", "....##.#.....#......#....#...#.", ".#.#...##.#..##..#..........#..", "..........................#....", "##..##..#..#.#....#.....#......", "...#.#........#.#.##.#.....#..#", "#..#....#...#..#...#........#.#", "#.......#####...#..#..#.#......", "#.##....#......#......#..###...", "..#.......#...........#.....##.", "#...#....#..#......##...#......", "...##.#..##........#..###......", "##.#...........#.............##", "#.....#..#.....#.....#.........", ".#..........#..#......###......", "...#...#..##.......#...#...#.#.", "..####......#.....#..#.#......#", "....#..#.....#.#...............", ".#.......#....#.....#..##....#.", ".....#.........#..........##...", "#...........#..#.....#........#", "............#..##...#...#.#....", "##.............####...#.....#..", ".....#......#....##.#.....##...", "...........#.....#.#..#.#......", ".#.#......#....#.............##", "##...#.#.......##........#.....", "#..#.....#.#.......####...#..#.", "....#.#...#....#.###..#..#.#...", ".....#.#..#......#.##.#####.#..", ".....#....##..........#......#.", "#.......#........##.......##...", "#...#..#..##.#....#...#...#....", "...#..##..#...#..........#.....", "#..#....###.....#......##......", "...###......#.....#....#.......", "#.#...#.#..###.####.......#.#.#", "...#......#.#..##..#.....#.....", "#.#............#.....##.#......", "#..#......##...##..#...#.#..###", "#.....#...#..#..#....#..###....", "####..###....#..##....#..#.....", "..##.#.....#.......##....#.#.#.", "##..#.#.......#.#...##.#..#.#..", "..#.#.#.##.#.#.#...........#...", "...#.##.....#....#..#.#..#.....", "...#..#.........#..........#..#", "#...#..#.....#.#.#.............", "##.#....##.##...#...#..#..#..#.", "....####..##..##.#..#...##.....", "##.....##.#.#...#.#.......###..", "#..#.#....#......#.......##...#", "#.#...............#..#..#......", ".....##...##..#........#......#", ".#..#............##......#....#", "......#.#..#..##.#......#.....#", "..#.#.............#...#......##", "....#.#..#..#...##...#..##.....", "#.#.............#...#.#..#....#", "#..#..#.##....#....#...#.......", "....#..#..........#.....##...#.", "..#####.......#...#..........#.", "....#......##.......#..##.#.#.#", "#...#.#.....#....#....##.......", "..##.#.#..#.#...#.....##.....#.", "#.#..#....#............#..#.#..", "...#.##..##..#.#...###......#.#", "......##.......#....#......###.", "....#..##.......#..#.#....#..#.", "#............#..........##..#.#", "..#.....#..#.#..##..#....##.#..", ".....#.....#....##.#.#......#.#", "...####.......###..#...#.#....#", ".#.##.....##.....##..#..#......", "...#..###..##..................", "##..##.....#.#..#..#.#........#", ".#.#........##.........#....#..", "........#......###....#...#....", "......#...........#...........#", ".#...###...#.........#.#...#..#", ".....#..........#......##....#.", ".#.#...#........##.......#.#...", ".....##.....##....#...#...#..#.", "..#.....................##...##", "#..#.#......##...##..#......#.." };
        private const string TreeCharacter = "#";

        public void Process()
        {
            var hits11 = GetHitCount(1, 1);
            var hits31 = GetHitCount(3, 1);
            var hits51 = GetHitCount(5, 1);
            var hits71 = GetHitCount(7, 1);
            var hits12 = GetHitCount(1, 2);

            // TODO: Fix overflow (calculated manually for now)
            var hitProduct = hits11 * hits31 * hits51 * hits71 * hits12;

            Console.WriteLine($"{hitProduct} trees were hit");
        }

        private int GetHitCount(int positionIncrement, int rowIncrement)
        {
            var hits = 0;
            var position = 0;

            var rowLength = inputs.First().Length;

            for (var i = 0; i < inputs.Count(); i += rowIncrement)
            {
                var input = inputs[i];

                if (input.Substring(position, 1) == TreeCharacter)
                {
                    hits++;
                }

                position += positionIncrement;

                if (position >= rowLength)
                {
                    position -= rowLength;
                }
            }

            Console.WriteLine($"{hits} trees were hit for Right {positionIncrement}, Down {rowIncrement}");

            return hits;
        }

        protected class PasswordModel
        {
            public string Password { get; set; }
            public string Letter { get; set; }
            public int From { get; set; }
            public int To { get; set; }
        }
    }
}
